(function(global){var WX=function(options){this.options={link:window.location.href,title:document.title,desc:"",imgUrl:"",success:function(){},cancel:function(){}};_assign(this.options,options);this.init()};WX.prototype={init:function(){const _this=this;wx.ready(function(){wx.onMenuShareTimeline(_this.options);wx.onMenuShareAppMessage(_assign(_this.options,{type:"link",dataUrl:""}));wx.onMenuShareQQ(_this.options);wx.onMenuShareQZone(_this.options)});$.ajax({url:"/api/wx",data:{url:location.href.indexOf("#")>=0?location.href.substring(0,location.href.indexOf("#")):location.href},dataType:"jsonp",success:function(res){wx.config({appId:res.appId,timestamp:res.timestamp,nonceStr:res.nonceStr,signature:res.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]})}})}};var _assign=function(tar,obj){if(Object.assign(tar,obj)){return Object.assign(tar,obj)}var val;for(var key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(val==null||val===""){continue}tar[key]=val}}return tar};if(typeof module!=="undefined"&&module.exports){module.exports=WX}if(typeof define==="function"){define(function(){return WX})}global.WX=WX})(this);